import React from 'react'
import { Table } from "antd";
import { DeleteOutlined } from "@ant-design/icons";
import { EditOutlined } from "@ant-design/icons";
import { removeImo, editImo } from "../services/imoServices";
import { getAllExp } from "../services/exploi";
import { useEffect, useState } from "react";

const Exploitation = () => {

    const dataSource = [
        {
          key: '1',
          name: 'Mike',
          age: 32,
          address: '10 Downing Street',
        },
        {
          key: '2',
          name: 'John',
          age: 42,
          address: '10 Downing Street',
        },
      ];
      
      const columns = [
        {
          title: 'Designation',
          dataIndex: 'Designation',
          key: 'Designation',
        },
        {
            title: 'User',
            dataIndex: 'user',
            key: 'user',
          },
          {
            title: "Date Depot",
            dataIndex: "dateDepot",
            key: "dateDepot",
          },

          {
            title: "Date Sortie",
            dataIndex: "dateSortie",
            key: "dateSortie",
          },

          {
            title: "Action",
            dataIndex: "Action",
            key: "Action",
            render: (im) => {
              return (
                <div>
                  <DeleteOutlined
                    onClick={async () => {
                      await removeImo(im._id);
                      window.location.reload("/client");
                    }}
                  >
                    supprimer
                  </DeleteOutlined>
        
                  <EditOutlined
                    onClick={async () => {
                      await editImo(im._id);
                      window.location.reload("/client");
                    }}
                  >
                    modifier
                  </EditOutlined>
                </div>
              );
            },
        
          }
         

    
 
];
const [exp, setExp] = useState([]);
  useEffect(() => {
    getAllExp() // fetch as usual here!
      .then((data) => {
        setExp(data.data.result);
      });
  }, []);
return (

    <Table
    dataSource={exp} columns={columns}  setImo={setExp} />
  )

    
}


  

export default Exploitation;

  




