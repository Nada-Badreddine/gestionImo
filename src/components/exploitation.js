import React from "react";
import { Table } from "antd";
import { DeleteOutlined } from "@ant-design/icons";
import { EditOutlined } from "@ant-design/icons";
import { getAllExp, removeExp, editExp } from "../services/exploi";
import { useEffect, useState } from "react";

const Exploitation = () => {
  const dataSource = [
    {
      key: "1",
      name: "Mike",
      age: 32,
      address: "10 Downing Street",
    },
    {
      key: "2",
      name: "John",
      age: 42,
      address: "10 Downing Street",
    },
  ];

  const columns = [
    {
      title: "Designation",
      dataIndex: "Designation",
      key: "Designation",
    },
    {
      title: "User",
      dataIndex: "User",
      key: "User",
    },
    {
      title: "Date Depot",
      dataIndex: "DateDepot",
      key: "dateDepot",
    },

    {
      title: "Date Sortie",
      dataIndex: "DateSortie",
      key: "dateSortie",
    },

    {
      title: "Action",
      dataIndex: "Action",
      key: "Action",
      render: (_, ex) => {
        return (
          <div>
            <DeleteOutlined
              onClick={async () => {
                await removeExp(ex._id);
                window.location.reload("/client");
              }}
            >
              supprimer
            </DeleteOutlined>

            <EditOutlined
              onClick={async () => {
                await editExp(ex._id);
                window.location.reload("/client");
              }}
            >
              modifier
            </EditOutlined>
          </div>
        );
      },
    },
  ];
  const [exp, setExp] = useState([]);
  console.log("hhh", exp);
  useEffect(() => {
    getAllExp() // fetch as usual here!
      .then((data) => {
        setExp(data.data.result);
      });
  }, []);

  return <Table dataSource={exp} columns={columns} setExp={setExp} />;
};

export default Exploitation;
